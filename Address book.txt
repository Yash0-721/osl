FILE="addressbook.txt"

# a) Create address book
createAddressBook() {
    local Sfile="$FILE"

    if [ -e "$Sfile" ]; then
        echo "Address book already exists."
    else
        touch "$Sfile"
        echo "Address book created."
    fi
}

# View address book 
viewAddressBook() {
    local Sfile="$FILE"
    if [ ! -s "$Sfile" ]; then
        echo "Address Book is empty or does not exist."
    else
        echo "-----Address Book-----"
        cat "$Sfile"
    fi
}

# Insert a record
insertRecord() {
    echo "Insert a record in format: Last name, First name, Email, Phone"
    read record
    echo "$record" >> "$FILE"
    echo "Record inserted"
}

# Delete a record
deleteRecord() {
    echo "Enter a search string (e.g. name or email) to find record to delete:"
    read search
    grep -n "$search" "$FILE"
    echo "Enter the line number to delete:"
    read line
    sed -i "${line}d" "$FILE"
    echo "Record Deleted."
}

# Modify the record
modifyRecord() {
    echo "Enter a search string (e.g. name or email) to find record to modify:"
    read search
    grep -n "$search" "$FILE"
    echo "Enter line number to modify"
    read line
    echo "Enter new record (last name, First name, Email, Phone):"
    read newRecord
    sed -i "${line}s/.*/$newRecord/" "$FILE"
    echo "Record modified"
}

# Exit the program
exitProgram() {
    echo "Exiting... Goodbye!"
    exit 0
}

# Menu loop
while true; do
    echo "=== Address Book Menu ==="
    echo "1. Create Address Book"
    echo "2. View Address Book"
    echo "3. Insert a Record"
    echo "4. Delete a Record"
    echo "5. Modify a Record"
    echo "6. Exit"
    echo "Enter Your Choice:"
    read choice

    case $choice in
        1) createAddressBook ;;
        2) viewAddressBook ;;
        3) insertRecord ;;
        4) deleteRecord ;;
        5) modifyRecord ;;
        6) exitProgram ;;
        *) echo "Invalid choice. Please select 1-6." ;;
    esac
done
